<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Dark Mode : Javascript Bookmark</title>
</head>
<body>
    <div class="grid-2">
        <div class="section-1">
            <i class="fas fa-code fa-5x white"></i>
            <h2>Dark Mode</h2>
            <p>Javascript Bookmark</p>
            <a href="https://github.com/sanketmehta7" target="_blank"><i class="fab fa-github"></i></a>
        </div>
        <div class="section-2">
            <a class="bmark" href='javascript:(function(){function invert(o,t){var r=o.split("("),n=r[1].split(")")[0].split(",");return n.forEach(function(o,r){r<3&&(n[r]="color"==t&&255-parseInt(o)<50?120:255-parseInt(o))}),n=n.join(","),r[0]+"("+n+")"}document.querySelectorAll("*:not([invTouch])").forEach(function(o){var t=window.getComputedStyle(o);""==o.style.backgroundColor&&(o.style.backgroundColor=invert(t.backgroundColor,"back"),o.attributes.invTouch="true"),""==o.style.color&&(o.style.color=invert(t.color,"color"),o.attributes.invTouch="true")});})();'>Add Book Mark</a>
            <h2>About</h2>
            <p>Convert most website to Dark Mode using just book mark. Right click above button and select "Add Link to Bookmark". Select this bookmark on any website to change it to dark mode.
                <note>*Latest Chrome Don't Support JS Bookmarks.</note>
            </p>
            <h2>Code</h2>
            <p class="code">
                <div class="tit">Bookmark code to add manually:</div>
                <code>
                    <br/>
                    javascript:(function(){function invert(o,t){var r=o.split("("),n=r[1].split(")")[0].split(",");return n.forEach(function(o,r){r<3&&(n[r]="color"==t&&255-parseInt(o)<50?120:255-parseInt(o))}),n=n.join(","),r[0]+"("+n+")"}document.querySelectorAll("*:not([invTouch])").forEach(function(o){var t=window.getComputedStyle(o);""==o.style.backgroundColor&&(o.style.backgroundColor=invert(t.backgroundColor,"back"),o.attributes.invTouch="true"),""==o.style.color&&(o.style.color=invert(t.color,"color"),o.attributes.invTouch="true")});})();
                </code>
                <br/>
                <br/>
                <hr/>
                <div class="tit">Exact code</div>
                <pre>
//invert color and skip transparency value
function invert(str,type){
  var t1 = str.split("(");
  var t2 = t1[1].split(")");
  var t3 = t2[0].split(",");
  t3.forEach(function(v,i){
   if(i<3){
    if(type=="color")
        t3[i] = (255 - parseInt(v))<50?120:(255 - parseInt(v));
    else
        t3[i] = (255 - parseInt(v));
   }
  })
  t3 = t3.join(",");
  return t1[0]+"("+t3+")";
}
//invert color and backgroundcolor of every dom node
document.querySelectorAll('*:not([invTouch])').forEach(function(node) {
    var style  = window.getComputedStyle(node);
    if(node.style.backgroundColor==""){
        node.style.backgroundColor = invert(style.backgroundColor,"back");
        node.attributes['invTouch'] = 'true';
    }
    if(node.style.color==""){
        node.style.color = invert(style.color,"color");
        node.attributes['invTouch'] = 'true';
    }
});
                </pre>

            </p>
        </div>
    </div>
</body>
</html>